# 프로그래밍 언어론

## 프로그래밍 언어란

프로그래밍 언어는 컴퓨터에 프로그래머의 의사를 전달하는 방법이며, 동시에 프로그램을 작성하는 형식이다.

프로그래밍 언어는 컴퓨터 구조의 추상화이기도 하다.
변수는 기억장치를, 연산자는 CPU를 추상화한 것이라 할 수 있다.

## 프로그래밍 언어의 구조 및 해석

### 언어구문

컴퓨터 내부에서는 7비트로 구성된 ASCII 코드를 일반적으로 사용한다.
이후 각 국가의 문자코드에 대응한 문제를 해결하기 위해 16비트 유니코드 체계가 도입되었다.

프로그래밍 언어의 어휘구조는 프로그래밍 언어 알파벳 문자로 구성된 어휘토큰이다.

번역기는 어휘분석 단계에서 입력 프로그램의 일련의 문자를 토큰으로 구분하고,
구문분석 단계에서 이를 처리하여 구문구조를 결정한다.

한 개 이상의 어휘 토큰을 가지고 구문적으로 허용된 프로그램의 일부구조를 언어 구성자(식별자)라고 한다.
프로그래밍 언어는 일부 식별자를 미리 정의하여 사용한다.
미리 정의된 식별자 중에서 재정의 할 수 없도록 한 식별자를 예약어(reserved word)라고 한다.

예약어를 사용함으로써 프로그램을 읽기 쉽도록 하고,
컴파일러가 기호 테이블을 짧은 시간에 탐색하도록 해주며, 오류 검색시간을 줄여준다.

#### 문맥 자유 문법과 BNF

```text
<identifier> ::= <letter> | <identifier> <letter> | <identifier> <digit>
<letter> ::= A | B | C | ... | X | Y | Z
<digit> ::= 0 | 1 | 2 | ... 8 | 9
```

- 비단말(nonterminal) 기호: `<foo>`: BNF 규율로 다시 정의될 대상
- 단말(terminal) 기호: `foo`: 각 언어에서 사용하는 알파벳 문자 집합과 예약어
- 메타기호(meta symbol): `::=`, `|`, `<>`: 언어를 표현하기 위해 사용한 특수기호

모든 생성규칙에서 정의될 대상이 하나의 비단말 기호만으로 구성된다면 그 문법을 문맥자유 문법이라고 한다.
즉, 각 비단말기호가 어디에 나타난다 해도 그에 해당되는 오른쪽 선택으로 언제나 대치될 수 있음을 뜻한다.

특수한 문맥에 의존하여 대치되는 문법을 문맥의존 문법이라고 한다.

#### EBNF

BNF 표기법으로 모든 프로그래밍 언어를 표기할 수 있지만 보다 간결하게 표현할 수 있는 EBNF를 사용하기도 한다.
EBNF는 특수한 의미를 갖는 메타 기호를 더 사용하여 반복되는 부분이나 선택적인 부분을 간결하게 표현할 수 있다.

반복되는 부분은 `{ }`를 사용하여 나타낸며, 선택적인 부분은 `[ ]`를 사용하여 나타낸다.

예를 들어 영문자로 시작하고 최고 8개의 문자를 가질 수 있는 식별자를 EBNF로 표기하면 다음과 같다.

```text
<identifier-name> ::= <letter> {<alphanumeric>}70
<alphanumeric> ::= <letter> | <digit>
<letter> ::= A | B | C | ... | X | Y | Z
<digit> ::= 0 | 1 | 2 | ... 8 | 9
```

반복표기뒤의 두 숫자는 최대(7)와 최소(0)을 나타낸다.

메타기호를 단말기호로 나타낼 때의 혼동을 피하기 위해서 `단말기호: '메타기호'`와 같이 사용한다.

#### 구문도표

구문도표에서 다시 정의될 대상은 사각형으로 표시하고,
단말기호는 원이나 타원으로 표시하고, 비단말 기호는 사각형으로 표시한다.
이들의 사이는 지시선으로 연결한다.

#### Parse Tree

한 표현이 주어진 BNF에 의하여 작성될 수 있는지를 확인하기 위해,
대상을 root로 하고 단말노드를 왼쪽에서 오른쪽으로 나열한 것이 검증하고자 하는 표현과 같은 트리이다.

Parse Tree에서 불필요한 비단말기호를 없애면 (추상)구문 트리라 한다.

그러나, 하나의 BNF식이 두 가지 이상의 Parse Tree로 유도되는 경우 모호성을 갖게된다.
모호성을 갖는 경우 문법을 모호함이 없도록 개정하거나 모호성 제거규칙을 기술해야 한다.

dangling else 문제 ...

### 프로그래밍 언어 구현 기법

#### 컴파일 (Compile)

컴파일러는 source 언어(고급/저급언어)로 작성된 프로그램을 입력받아 object 언어(고급/저급언어)로 된
기능이 동등한 프로그램을 출력해주는 언어처리기이다.

그러나 일반적인 의미에서 컴파일러는 고급 프로그래밍 언어로 작성한 프로그램을 실제 컴퓨터의 기계어로 번역하여
동등한 의미의 기계어 프로그램을 만들어 실행시키는 방법을 지칭한다.

- 컴파일러(compiler): 원시언어를 목적언어(일반적으로 준기계어: relocatable form)로 만들어주는 번역기
- 어셈블러(assembler): 원시언어가 어셈블리 언어인 번역기, 어셈블리 명령어 하나당 하나의 기계어 명령으로 단순번역됨
- 링커(linker): relocatable form으로 구성된 여러 개의 프로그램(컴파일된 목적코드와 라이브러리)을 묶어서, 로드모듈이라는 어느정도 실행가능한 하나의 기계어로 번역해주는 번역기
- 로더(loader): 로드 모듈로 된 기계어 프로그램을 실제 실행 가능한 기계어로 번역해서 주 기억장치에 적재함
- 프리프로세서(preprocessor): 원시언어와 목적언어가 모두 고급언어인 번역기

순서: {고급언어 - 컴파일러 - 목적모듈} - 링커(다수의 목적모듈을 연결) - 로드모듈 - 로더 - 기계어

#### 인터프리트 (Interpreted)

인터프리터가 고급언어로 된 프로그램을 입력받아 기계어 수행과 동일한 알고리즘으로
프로그램의 각 문자을 디코딩하고 실행시킴으로써 고급 언어를 시뮬레이션 하는 것

순서: 고급언어 프로그램 - 인터프리터 - 실행 결과

#### 컴파일 기법과 인터프리트 기법의 비교

컴파일러는 프로그램의 각 문장을 입력된 순서대로 한 번씩 처리하여 효율적인 목적 코드를 생성하지만,
인터프리터는 프로그램의 논리적 순서에 따라 문장을 실행하기 때문에 반복 처리되는 부분이 있다.

많은 경우 프로그래밍 언어는 컴파일 기법과 인터프리트 기법을 함께 사용하여 구현된다.
이러한 구현기법을 중간 코드 실행기법이라고 한다.

## 변수, 바인딩, 식, 제어문

### 변수 (variable)

변수란 선언문 또는 묵시적 선언으로 생성되며, 식별자, 자료속성의 집합, 하나 이상의 주소, 자료값
네 가지 요소로 구성되는데, 주소와 자료값의 관계는 변할 수 있다.

### 바인딩 (binding)

이름에 어떤 속성을 연결하는 과정을 바인딩(binding)이라고 한다.

속성이 이름에 연결되고 계산되는 과정이 어느 시점에서 이루어지는가에 따라 바인딩을 분류할 수 있는데,
그 시간을 바인딩 시간(binding time)이라 한다.

#### 바인딩 시간 (binding time)

바인딩 시간에는 크게 정적 바인딩(static binding)과 동적 바인딩(dynamic binding) 개념이 있다.

- 실행시간
  - 바인딩은 대부분 프로그램 실행시간 중에 이루어지는 동적바인딩이다
  - 모듈의 시작시간: 많은 프로그래밍 언어에서 중요한 바인딩이 모듈 프로그램(블록) 실행 시작시간에 발생한다
  - 실행시간의 사용시점: 프로그램을 실행하는 동안 사용시점에서 수시로 발생하는 바인딩이 있다

- 번역시간
  - 컴파일 언어에서는 대부분의 중요한 바인딩이 번역시간(translation time)에 수행된다
  - 컴파일 언어는 대부분 정적 바인딩을 기본으로 한다
  - 번역시간: 컴파일시간, 링크시간, 로드시간으로 구성된다

- 언어 구현시간
  - 프로그래밍 언어의 구성자에 관한 많은 특성을 구체적으로 한정하지 않고 프로그램을 작성할 때에 특성의 일부를 확정하도록 일임하고 있다.

- 언어의 정의시간
  - 프로그래밍 언어에서 허용되는 자료구조, 프로그램 구조 등에 관한 것은 언어 설계시 확정된다
  - 대부분의 언어에서는 언어의 정의시간 바인딩을 많이해서 언어의 구현시간에 일어나는 바인딩을 최소화 한다

### 선언 (declaration)

선언이란 실행 시 사용할 자료의 속성을 컴파일러 등에 알려주는 프로그램 문장으로, 바인딩을 제공하는 중요한 방법이다.

많은 프로그래밍 언어에서 명시적 선언이 없으면 묵시적 선언(default declaration)으로 간주한다.

자료의 속성에는 자료형, 크기, 이름, 생성시기, 소멸시기, 참조하는 첨자등이 있다.

```java
int[] arr = new int[30];
```

이 선언문은 배열 `arr`의 생성과 소멸 시기, 자료형, 원소의 수, 첨자값의 사용범위(0~29), 각 원소의 자료형, 참조할 배열이름 (arr) 등을 한정하는 선언문이다.

프로그래밍 언어에서 선언문은 다음과 같은 목적을 달성한다.

- 주기억장치 사용과 접근방법의 효율성
  - 프로그램 실행동안 변하지 않는 자료구조의 속성을 한정한다
  - 이러한 정보로 컴파일러는 기억장치 안에서 표기와 자료구조에 접근하는 계산을 최적화 할 수 있다

- 주기억장치 구동 효율
  - 선언에 따라 제공되는 자료구조 속성을 알게됨으로써 실행시간동안 보다 효율적인 기억장소 할당기법을 제공
  - 인터프리터 언어에서는 보다 복잡하고 비효율적으로 주기억장치를 사용한다

- Static type checking
  - type specific operation: 주어진 연산자에 대해 피연산자와 연산결과의 자료형이 고정되지 않은 연산
  - mixed operation: 주어진 연산자에 대한 피연산자와 연산결과의 자료형이 고정되지 않은 연산
  - 고급 프로그래밍 언어에서는 대부분 구현시간에 혼합형 연산을 사용할 수 있지만, 컴파일 타임에 목적코드의 타입은 고정된다

### 할당문 (assignment statement)

할당문은 변수의 내용을 변경할 수 있는 연산이며, 프로그램에서 가장 일반적으로 나타나는 연산문이다.

할당문을 위한 연산자는 다양하게 사용된다: `S = T`, `S := T`, `S <- T`, `LET S = T`, `MOVE T TO S`

- 단순 할당문: `<목적지변수> <할당연산자> <식>`
- 다중 목적 변수 할당문: `W, X ,Y = o`
- 조건 목적 변수 할당문: `flag ? n : m = o`
- 복합할당 연산자: `s = s + t`
- 단항할당 연산자: `t = ++s`, `t = s++`
  - 두 개의 단항 연산자가 동일한 피연산자에 적용될 경우 오른쪽부터 적용: `-s++` == `-(s++)`

할당문은 식으로 혹은 다른 식에 포함된 피연산자로 사용될 수 있다.

`while((s= getchar()) != "\n") { ... }`

할당문 양편에 자료형이 서로 다를 때 혼합형 할당문이라고 한다.

두 형이 일치하지 않는 경우에는 묵시적 형 변환의 사용여부가 고려사항이다.
혼합형 할당문을 허용하는 모든 언어에서 묵시적 형 변환은 오른쪽 식이 평가된 후에 일어난다.

### 상수 및 변수 초기화

변하지 않는 값을 갖는 변수의 사용을 지원하기 위해 상수라는 개념이 존재한다.

상수를 나타내는 이름에 실수로 어떤 값을 재할당 하는 경우 컴파일러가 이를 인식할 수 있으므로,
프로그램의 신뢰성이 증가한다.

### 표현식 (expression)

표현식은 하나 이상의 피연산자를 가지고 자료값의 계산을 기술하는 것이다.

식은 상수나 변수 같은 피연산자, 연산자, 그리고 사용가능한 함수호출(function call)로 구성된다.

식 평가는 피연산자 값에 대하여 주어진 연산을 실행함으로써 이루어진다.

한 프로그램에서 사용되는 모든 변수와 관련 있는 값은 program state space 또는 program environment를 형성한다.
이러한 환경을 변화시키지 않고 오직 값만 생성하는 것이 참조 투명성(referential transparency)이다.

그러나 대부분의 프로그래밍 언어에서는 식에 사용된 함수가 변수값을 변경시켜서 환경을 변화시킬 가능성이 존재한다.

식에서 피연산자와 연산자의 결합순서도 중요하다. (언어별로 연산자 우선순위가 다르다)

일반적으로 여러 피연산자가 있는 식의 평가는 피연산자를 평가한 후 연산자를 적용하여 결과를 얻는다.
이러한 방식을 평가의 적용순서(applicative order)라 한다.

그러나 논리 연산자는 하나의 피 연산자 값만을 알고도 그 식의 값을 알 수도 있다.
이를 위해 언어 내부에 단락회로(short circuit) 평가기법을 도입했다.

### 조건문 (conditional statement)

조건문은 조건에 따라 실행되는 부분이 달라질 때 사용하는 문장이다.

널리 사용되는 조건문으로는 `if elseif else`문과 `switch case`문이 있다.

### 반복문 (iteration statement)

반복문은 하나 이상의 문장을 0번 이상 반복하여 실행시키는 문장이다.

함수형 언어에서는 반복을 재귀호출로 수행한다.

- 사용자 지정 반복: 반복 수행을 하려는 일련의 문장을 묶어 의도한 횟수로 반복한다
  - `break`, `exit`: 반복문을 벗어난다
  - `continue`: 작은 반복구간을 가진다 (다시 루프의 처음으로 돌아감)

- 논리제어 반복문: 반복문은 초기 조건검사를 하고 그 결과가 참이면 반복문을 수행한뒤 다시 조건검사를 행한다

- 제어변수 반복문: `for`문과 같이 제어변수를 사용하여 고정된 횟수의 반복을 표시한다
