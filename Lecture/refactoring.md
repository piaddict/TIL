# Refactoring

## 리팩토링 개론

리팩토링: 겉으로 드러나는 기능은 그대로 둔 채, 알아보기 쉽고 수정하기 간편하게 소프트웨어 내부를 수정하는 작업

리팩토링의 목적은 소프트웨어를 더 이해하기 쉽고 수정하기 쉽게 만드는 것이다.
리팩토링은 성능 최적화와 상반된다. 성능 최적화를 수행하면 코드를 파악하기 더 어려워질 때가 많다.

소프트웨어 개발에 리팩토링을 적용할 때 기능 추가와 리팩토링이라는 별개의 두 작업에 시간을 분배해야 한다.

- 기능을 추가할 땐 코드를 수정하지 말고 기능만 추가해야 하며, 진행상태를 파악하려면 테스트를 추가하고 통과여부를 확인한다
- 리팩토링 할 때는 코드를 추가하지 말고 코드 구조 개선만 해야 한다
- 인터페이스가 변경되어 그에 맞게 코드를 고치는 것이 불가할 때는 테스트만 변경해야 한다

### 리팩토링 목적

- 소프트웨어 설계 개선
  - 지속적으로 코드를 수정하면 코드 구조가 복잡해진다
  - 코드의 처음 설계구조를 유지하려면 정기적으로 리팩토링을 실시해야 한다
  - 특히 설계가 깔끔하지 않으면 중복코드로 인해 쓸데없이 코드가 길어진다

- 소프트웨어 이해를 쉽게 한다
  - 코드에는 나중에 수정될 다른 개발자에 대한 고려가 반영되어야 한다
  - 코드를 파악하기 쉽게 수정하기 위한 과정이 리팩토링이다
  - 리팩토링을 하면서 낮선 코드를 쉽게 이해할 수도 있다

- 버그를 찾기 쉬워진다
  - 프로그램 구조를 명료하게 만들어 특정해놓은 전제들이 확실해지면 버그 발견하기가 쉬워진다

- 프로그래밍 속도가 빨라진다
  - 깔끔한 설계는 소프트웨어 개발속도를 높이기위한 핵심이다
  - 깔끔하지 않다면 버그를 찾고 중복코드를 찾느라 시간이 길어진다

### 리팩토링이 필요할 때

- 같은 작업의 삼진 아웃
  - 어떤 작업을 처음 하면 그냥 한다.
  - 비슷한 작업을 두 번째 하면 중복이라도 그냥 한다
  - 그러나 비슷한 작업을 세 번째 하게 되면 리팩토링을 실시해야 한다

- 기능을 추가할 때
  - 기능을 추가할 때 기존 코드를 이해하기 위해서, 혹은 이해하기 쉽게 만들기 위해 리팩토링이 필요하다
  - 리팩토링 여부는 이해가 쉽게 고칠 수 있는지 고민한 뒤 결정한다
  - 기능 추가 중 설계 때문에 작업의 어려움을 느낀다면 리팩토링을 실시해야 한다

- 버그 수정시
  - 버그를 수정하려면 코드의 기능을 파악하여야 하고 이를 위해 리팩토링을 실시한다
  - 버그 리포팅을 받았을 때도 리팩토링이 필요하다. 버그 존재를 파악하기 힘든 구조가 존재했기 때문이다

- 코드 검수시
  - 코드를 검수한다면 리팩토링을 통해 자신의 코드를 이해하기 쉽게 만들고 타인의 코드를 쉽게 이해하여야 한다
