# GIT for Teams

## 브랜치 전략

모든 Git 저장소에는 커밋 pool이 있다. 이 커밋들은 자신의 메타데이터를 통해 서로 연결돼있다.
모든 커밋은 자신의 부모에 대한 참조를 갖는다. 병합 커밋의 경우, 하나 이상의 부모 커밋이 참조될 수 있다.

Git의 브랜치는 특정 커밋에 대한 이름이 있는 포인터라고 할 수 있다.
브랜치를 살펴본다는 것은, 포인터가 가리키는 커밋 객체에 담긴 데이터를 복사한다는 것을 의미한다.
일단 데이터가 작업 폴더로 복사되면 원하는 대로 고칠 수 있다.

커밋 객체는 처음 생성했을 때 로컬에 속하고, 오직 생성한 사람의 것이다.

### 규약

#### 메인라인 브랜치 개발

개발자들은 지속해서 하나의 중앙 브랜치에 작업을 커밋한다.
중앙 브랜치는 항상 배포 준비 상태로 유지한다. 다른말로 하면 프로젝트의 메인 브랜치는 오직 이미 검토완료된 작업만 담아야 하고 오류가 없어야 한다.

보통 자동 빌드 과정을 사용하는 팀들이 하나의 작업 브랜치로 일하는 경우가 많다.

작업을 하다보면 로컬 작업코드와 완성품 코드를 구분할 필요가 생긴다.
이 점 때문에 완전한 연속배포 전략을 취하지 않고, 여러개의 브랜치와 정기배포 전략을 사용한다.

#### 기능별 브랜치 배포

기능별 브랜치 배포 전략에서 새로운 모든 작업은 기능 브랜치에서 이뤄진다.
기능 브랜치는 하나의 온전한 아이디어를 담을 만큼으로 크기를 한정한다.

기능 브랜치는 통합 브랜치를 통해 다른 개발자의 작업을 가져와 최신 코드상태를 유지한다.

기능브랜치와 하나의 통합브랜치(릴리즈 브랜치)를 추가하면 배포 준비가 완료된 코드를 가질 수 있다.

마스터에 병합된 브랜치는 삭제해야 한다.

#### 상태 브랜칭

- 브랜치 이름은 구체적으로 작업 상황을 설명하고 당면 작업과 관련이 있어야한다.
- 개별 브랜치의 목적을 추측할 필요가 없어 사람들이 자신의 작업을 병합할 올바른 브랜치를 찾기 쉽다.

- 이름이 아무리 구체적이라 해도 안내없이 어떤 브랜치를 사용할지 분명한 것은 아니다
- 브랜치 이름이 해당팀의 상황을 구체적으로 설명하기 때문에 여러 프로젝트간 일관성을 유지하기 어렵다.

#### 정기배포

완전한 테스트 자동화 프로그램들이 없고 정기적으로 배포해야 하는 상황이라면, 정기 배포 전략이 가장 적절하다.

처음 프로젝트는 하나의 브랜치 develop을 가진다. 이 브랜치로부터 브랜치를 생성하여 기능을 추가한다.
기능은 버그수정, 리팩토링, 완전히 새로운기능일 수도 있다.

티켓을 통해 작업할 기능을 설명하고 해당 브랜치의 이름은 티켓의 이름에서 따온다.
`[티켓id]-[제목]` 또는 `[tag]-[제목](#티켓id)` 형식으로 사용할 수 있다.

기능추가가 목표지점에 이르렀다면 기능을 동결한다. develop 브랜치로부터 새로운 브랜치를 생성하고 해당 브랜치에는 오직 버그수정 커밋만 허용된다.
release 브랜치에 커밋된 버그수정은 다시 develop 브랜치에 백포트 해야한다.
품질 관리기간이 길어질수록 develop 브랜치와 release 브랜치 양쪽에서 작업하게 될 확률이 높아질 것이다.

테스트를 진행한 후 배포준비가 끝났다고 판단되면 새로운 브랜치 master에 커밋되고, 당시 소프트웨어 버전을 태그로 단다.
만약 master에서 버그가 발견되어 수정이 필요하다면 hotfix 브랜치를 만들어 master와 develop에 동시 반영한다.

### 브랜치 업데이트 하기

브랜치를 업데이트할 때는 병합과 리베이스 중 하나를 선택할 수 있다.
