# HTTP Basic

그림으로 배우는 HTTP network basic을 읽고 정리

## Web과 Network 기초

### 웹은 HTTP로 나타낸다

웹브라우저(클라이언트)와 서버는 HyperText Transfer Protocol로 통신한다

### HTTP의 역사

1989년 3월 CERN에서 고안됨

HyperText에 의해 상호 참조할 수 있는 World Wide Web을 구성하는 기술

- HTML(HyperText Markup Language): 문서 기술 언어
- HTTP: 문서 전송 프로토콜
- URL(Uniform Resource Locator): 문서 주소 지정

### 웹의 성장

- 1993년 1월 NCSA에서 Mosaic 브라우저가 개발됨
- 1994년 12월 넷스케이프 네비게이터 출시
- 1995년 마이크로소프트 인터넷 익스플로러 출시
- 이 무렵 웹서버 Apache 등장
- HTML 2.0 발행

### HTTP의 정체

- HTTP/0.9: 1990년 정식사양 이전
- HTTP/1.0: 1996년 5월 정식사양 (RFC1945) 발행
- HTTP/1.1: 1997년 1월 공개되었고 현재 가장 많이 사용됨 (RFC2068 -> RFC2616)
- HTTP/2.0: 차세대 버전, 현재 보급중

### 네트워크: TCP/IP

#### TCP/IP는 프로토콜의 집합

컴퓨터와 네트워크 기기가 상호통신을 하기위해 규약이 있어야 함. 이를 프로토콜이라 한다.

인터넷과 관련된 프로토콜을 모은것을 TCP/IP라고 한다.
TCP와 IP 프로토콜을 가리켜 TCP/IP라 부르기도 하지만,
IP 프로토콜을 사용한 통신에서 사용되고 있는 프로토콜을 총칭해서 TCP/IP라는 이름이 사용되고 있다.

#### TCP/IP의 계층

TCP/IP는 애플리케이션 계층, 트랜스포트계층, 네트워크 계층, 링크 계층의 4계층으로 구성되어 있다.

##### 애플리케이션 계층

애플리케이션 계층은 유저에게 제공되는 애플리케이션에서 사용하는 통신

예를 들어 FTP, HTTP등이 해당됨

##### 트랜스포트 계층

애플리케이션 계층에 네트워크로 접속되어 있는 컴퓨터사이 데이터 흐름을 제공함

TCP(Transmission Control Protocol)와 UDP(User Data Protocol)의 두가지가 있음

애플리케이션 계층에서 받은 데이터를 전송/수신하기 위해 변환함

##### 네트워크 계층

네트워크 계층은 네트워크 상에서 패킷의 이동을 다룬다.

수신지의 MAC 주소등을 통해 네트워크 기기간 길을 결정하는 것이 해당 계층의 역할이다.

##### 링크 계층

네트워크에 접속하는 하드웨어적인 면을 다룬다.

운영체제가 하드웨어를 제어하므로, 디바이스 드라이버, 네트워크 인터페이스카드(NIC)를 포함한다.
또한 케이블 및 커텍트와 같은 물리적인 영역 또한 포함한다.

#### TCP/IP 통신의 흐름

TCP/IP로 통신할 때 계층을 순서대로 거쳐 상대와 통신한다.
송신과 수신에서 거쳐가는 계층은 역순이다.

클라이언트

1. 애플리케이션: HTTP 클라이언트 (HTTP 데이터)
2. 트랜스포트: TCP (+ TCP 헤더)
3. 네트워크: IP (+ IP 헤더)
4. 링크: 네트워크 (+ Ethernet 헤더)

서버

1. 링크: 네트워크 (- Ethernet 헤더)
2. 네트워크: IP (- IP 헤더)
3. 트랜스포트: TCP (- TCP 헤더)
4. 애플리케이션: HTTP 서버 (HTTP 데이터)

#### IP

Internet Protocol은 네트워크 계층이다.

IP 프로토콜은 다음의 정보로 개개의 패킷을 상대방에게 전달한다

- IP주소 : 각 노드에 부여된 주소
- MAC주소: 네트워크 카드에 할당된 고유주소

IP 통신은 MAC주소에 의존해서 통신을 한다.
보통 네트워크간 중계를 통해 상대에게 도착하게 되는데 이때 ARP(Address Resolution Protocol) 프로토콜이 사용된다.

ARP 프로토콜은 수신지의 IP주소를 바탕으로 MAC주소를 조사할 수 있다.

목적지까지 중계 하는 도중 네트워크 기기는 대략의 목적지만 알고 전송되는데 이를 라우팅이라 한다.

#### TCP

TCP는 트랜스포트 계층에 해당되는데, 신뢰성 있는 바이트 스트림 서비스를 제공한다.

TCP는 용량이 큰 데이터를 TCP 세그먼트라 불리는 단위패킷으로 분해하여 관리하고, 도착여부의 정확성을 확인한다.

TCP에서 상대에게 확실하게 데이터를 보내기 위해서 Three way handshaking 이라는 방법을 사용한다.
이는 패킷을 보내고 바로 끝내지 않고, 전송여부 확인을 위해 'SYN'과 'ACK'라는 TCP 플래그를 사용하는 것이다.

- 송신측에서 최초 SYN 플래그로 상대에게 접속함과 동시에 패킷을 보냄
- 수신측에서 SYN/ACK 플래그로 송신측에 접속함과 동시에 패킷을 수신한 사실을 보냄
- 송신측이 ACK 플래그를 보내 패킷 교환이 완료되었음을 알림
- 통신이 끊어지면 같은 과정을 반복하며 패킷을 재전송한다

이외에도 신뢰성을 보증하기 위한 다양한 시스템이 있다

### DNS

DNS(Domain Name System)는 HTTP 같은 응용 계층 시스템에서 도메인 이름과 IP 주소 이름확인을 제공한다.

### URI와 URL

URI(Uniform Resource Identifier)

- Uniform: 통일된 서식으로 여러 종류의 리소스 지정방법을 동일 맥락에서 구분
- Resource: 리소스는 식별 가능한 모든것이다.
- Identifier: 식별가능한 것을 참조하는 오브젝트

URI는 리소스를 식별하기 위한 문자열 전반을 나타내는데, URL은 리소스의 네트워크상 위치를 나타낸다.
즉, URL은 URI의 subset이다.

절대 URI(필요 정보 전체를 지정) 포맷

- 스키마: `http://`
- 자격정보(옵션): `user:pass@`
- 서버주소: `www.example.com`
- 서버포트(기본 80): `:80`
- 계층적 경로: `/dir/index`
- 쿼리 문자열: `?id=1`
- 프래그먼트 식별자: `#ch1`

## HTTP 프로토콜의 구조
